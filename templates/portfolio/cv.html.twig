{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
    <link rel="stylesheet" href="{{ asset('css/cv.css') }}">
{% endblock %}

{% block body %}
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="{{ path('app_home') }}">Mon Portfolio</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
            data-bs-target="#navbarNav" aria-controls="navbarNav" 
            aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="{{ path('app_home') }}">Accueil</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ path('app_propos') }}">À propos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ path('app_projects') }}">Projets</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="{{ path('app_cv') }}">CV</a>
        </li>

      </ul>
    </div>
  </div>
</nav>

<!-- Section CV -->
<section class="cv-section py-5">
  <div class="container">
    <!-- Titre -->
    <div class="row mb-5">
      <div class="col-12 text-center">
        <h1 class="cv-page-title">Mon Curriculum Vitae</h1>
        <p class="cv-page-subtitle">Consultez mon CV ci-dessous</p>
      </div>
    </div>

    <div class="row">
      <!-- Formulaire de téléchargement -->
      <div class="col-lg-4 mb-4 mb-lg-0">
        <div class="download-box">
          <div class="download-icon">
            <i class="bi bi-file-earmark-pdf"></i>
          </div>
          <h3>Télécharger mon CV</h3>
          <p>Remplissez le formulaire pour obtenir mon CV au format PDF</p>
          
          <form id="downloadForm">
            <div class="mb-3">
              <label for="name" class="form-label">Nom</label>
              <input type="text" class="form-control" id="name" required>
            </div>
            
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" required>
            </div>
            
            <button type="submit" class="btn btn-custom w-100">
              <i class="bi bi-download me-2"></i>Télécharger
            </button>
          </form>

          
        </div>
      </div>

      <!-- Visualiseur PDF -->
      <div class="col-lg-8">
        <div class="pdf-box">
          <embed 
            src="{{ asset('documents/CV_Lubin_Vezant.pdf') }}" 
            type="application/pdf" 
            width="100%" 
            height="800px"
          />
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer py-5">
  <div class="container">
    <div class="row g-4">
      <div class="col-md-4">
        <h5 class="footer-title mb-3">Lubin Vezant</h5>
        <p class="footer-text">
          Étudiant passionné par l'informatique.
        </p>
        <div class="social-links mt-3">
          <a href="#" class="social-link me-3" aria-label="LinkedIn">
            <i class="bi bi-linkedin"></i>
          </a>
          <a href="#" class="social-link me-3" aria-label="GitHub">
            <i class="bi bi-github"></i>
          </a>
          <a href="#" class="social-link me-3" aria-label="Email">
            <i class="bi bi-envelope"></i>
          </a>
          <a href="#" class="social-link" aria-label="Twitter">
            <i class="bi bi-twitter"></i>
          </a>
        </div>
      </div>

      <div class="col-md-4">
        <h5 class="footer-title mb-3">Navigation</h5>
        <ul class="footer-links">
          <li><a href="/">Accueil</a></li>
          <li><a href="/about">À propos</a></li>
          <li><a href="/projects">Projets</a></li>
          <li><a href="/cv">CV</a></li>
          <li><a href="/contact">Contact</a></li>
        </ul>
      </div>

      <div class="col-md-4">
        <h5 class="footer-title mb-3">Contact</h5>
        <ul class="footer-links">
          <li>
            <i class="bi bi-envelope me-2"></i>
            <a href="mailto:lubin.vezant@etu.univ-st-etienne.fr">lubin.vezant@etu.univ-st-etienne.fr</a>
          </li>
          <li>
            <i class="bi bi-geo-alt me-2"></i>
            Saint-Étienne, France
          </li>
        </ul>
      </div>
    </div>

    <hr class="footer-divider my-4">

    <div class="row">
      <div class="col-md-6 text-center text-md-start">
        <p class="footer-copyright mb-0">
          © 2026 Lubin Vezant. Tous droits réservés.
        </p>
      </div>
    </div>
  </div>
</footer>

<script>
document.getElementById('downloadForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    
    if (name && email) {

        
        // Télécharger le PDF
        setTimeout(() => {
            const link = document.createElement('a');
            link.href = '{{ asset('documents/CV_Lubin_Vezant.pdf') }}';
            link.download = 'CV_Lubin_Vezant.pdf';
            link.click();
            
            // Réinitialiser
            document.getElementById('downloadForm').reset();
            setTimeout(() => {
                document.getElementById('successMsg').style.display = 'none';
            }, 3000);
        }, 500);
    }
});
</script>
{% endblock %}